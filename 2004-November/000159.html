<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Provirent-svn-commit] r158 - in project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui: . language
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/provirent-svn-commit/2004-November/index.html" >
   <LINK REL="made" HREF="mailto:provirent-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BProvirent-svn-commit%5D%20r158%20-%20in%20project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui%3A%20.%20language&In-Reply-To=%3C200411232336.iANNaDHn021492%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000158.html">
   <LINK REL="Next"  HREF="000160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Provirent-svn-commit] r158 - in project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui: . language</H1>
    <B>Philipp Schneider at BerliOS</B> 
    <A HREF="mailto:provirent-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BProvirent-svn-commit%5D%20r158%20-%20in%20project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui%3A%20.%20language&In-Reply-To=%3C200411232336.iANNaDHn021492%40sheep.berlios.de%3E"
       TITLE="[Provirent-svn-commit] r158 - in project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui: . language">pschneider at sheep.berlios.de
       </A><BR>
    <I>Wed Nov 24 00:36:13 CET 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000158.html">[Provirent-svn-commit] r157 - in project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui: . language
</A></li>
        <LI>Next message: <A HREF="000160.html">[Provirent-svn-commit] r159 - in project_src/provirent_hibernate/src: de/hsharz/provirent de/hsharz/provirent/management/gui de/hsharz/provirent/management/gui/language de/hsharz/provirent/objects de/hsharz/provirent/persistence test/provirent/hibernate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#159">[ date ]</a>
              <a href="thread.html#159">[ thread ]</a>
              <a href="subject.html#159">[ subject ]</a>
              <a href="author.html#159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: pschneider
Date: 2004-11-24 00:35:57 +0100 (Wed, 24 Nov 2004)
New Revision: 158

Modified:
   project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeImage.java
   project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/DialogMovie.java
   project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/language/movies.properties
Log:
- DialogMovie erg?\195?\164nzt und fertig zum testen
- gr?\195?\182?\195?\159e kann in einem weiteren Konstruktur angegeben werden

Modified: project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeImage.java
===================================================================
--- project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeImage.java	2004-11-23 23:01:17 UTC (rev 157)
+++ project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeImage.java	2004-11-23 23:35:57 UTC (rev 158)
@@ -124,7 +124,7 @@
     private TableColumn tableImagesOverview_ColumnID;
 
     private TableColumn tableImagesOverview_ColumnThumb;
-    
+
     private TableColumn tableImagesOverview_ColumnName;
 
     private TableColumn tableImagesOverview_ColumnDescription;
@@ -315,9 +315,7 @@
                 tableImagesOverview_ColumnThumb.setText(l
                         .getString(&quot;images.groupoverview.thumbnail&quot;));
                 tableImagesOverview_ColumnThumb.setWidth(75);
-                
-                
-                
+
                 tableImagesOverview_ColumnName = new TableColumn(
                         tableImagesOverview, SWT.CENTER);
                 tableImagesOverview_ColumnName.setText(l
@@ -460,7 +458,7 @@
             textImagesDescription = new Text(groupImagesDetail, SWT.MULTI
                     | SWT.V_SCROLL | SWT.BORDER);
             textImagesDescription.setEditable(false);
-            
+
             GridData text1LData3 = new GridData();
             text1LData3.horizontalAlignment = GridData.FILL;
             text1LData3.heightHint = 36;
@@ -503,7 +501,7 @@
                 public void widgetSelected(SelectionEvent evt) {
 
                     //file is selected
-                    
+
                     String[] filterExtensions = { &quot;*.gif&quot;, &quot;*.jpg&quot;, &quot;*.*&quot; };
                     FileDialog fileDialog = new FileDialog(getShell(), SWT.OPEN);
                     fileDialog.setText(currentDir);
@@ -518,14 +516,18 @@
 
                         scaledImage = ideaImage = new Image(getDisplay(),
                                 selectedFile);
-                        
+
                         canvasImg.redraw();
                         textFileUrl.setText(fileDialog.getFilterPath()
                                 + System.getProperty(&quot;file.separator&quot;)
                                 + fileDialog.getFileName());
 
                         //set the Image Name
-                        textImagesName.setText(fileDialog.getFileName().substring(0,fileDialog.getFileName().lastIndexOf(&quot;.&quot;)));
+                        textImagesName.setText(fileDialog.getFileName()
+                                .substring(
+                                        0,
+                                        fileDialog.getFileName().lastIndexOf(
+                                                &quot;.&quot;)));
                         //save the selected dir 
                         currentDir = fileDialog.getFilterPath();
 
@@ -661,19 +663,19 @@
                         mode_image = ManagementGui.MODE_ADD;
 
                         tableImagesOverview.deselectAll();
-                        
+
                         textImagesID.setText(&quot;&quot;);
                         textImagesName.setText(&quot;&quot;);
                         textImagesDescription.setText(&quot;&quot;);
-                        
+
                         textImagesName.setEditable(true);
                         textImagesDescription.setEditable(true);
-                        
+
                         buttonSelectFile.setEnabled(true);
-                        
-                        ideaImage=scaledImage = null;
+
+                        ideaImage = scaledImage = null;
                         canvasImg.redraw();
-                        
+
                         buttonImageCancel.setEnabled(true);
                         buttonImageSave.setEnabled(true);
                         buttonImageNew.setEnabled(false);
@@ -697,13 +699,13 @@
 
                         textImagesID.setEditable(false);
                         textImagesName.setEditable(true);
-                        
+
                         textImagesDescription.setEditable(true);
                         textImagesName.setFocus();
 
                         buttonImageCancel.setEnabled(true);
                         buttonImageSave.setEnabled(true);
-                        
+
                         buttonImageNew.setEnabled(false);
                         buttonImageEdit.setEnabled(false);
                         buttonImageDelete.setEnabled(false);
@@ -834,7 +836,6 @@
                         logger.debug(&quot;buttonImageSave.widgetSelected, event=&quot;
                                 + evt);
 
-                        
                         if (scaledImage == null) {
                             statusLine
                                     .setStatus(
@@ -844,8 +845,6 @@
                             return;
                         }
 
-                        
-
                         //testen ob Name leer ist
                         if (textImagesName.getText().trim()
                                 .equalsIgnoreCase(&quot;&quot;)
@@ -882,11 +881,12 @@
                                     .getImageData() };
                             ByteArrayOutputStream bos = new ByteArrayOutputStream();
                             ImageData imgdata = scaledImage.getImageData();
-                            
+
                             System.out.println(imgdata.type);
                             System.out.println(SWT.IMAGE_JPEG);
 
-                            imageLoader.save(bos, scaledImage.getImageData().type);
+                            imageLoader.save(bos,
+                                    scaledImage.getImageData().type);
 
                             tmp.setImageFile(bos.toByteArray());
 
@@ -1166,22 +1166,23 @@
         textImagesID.setText(object.getImageId() + &quot;&quot;);
         textImagesName.setText(object.getImageFileName());
         textImagesDescription.setText(object.getImageFileDescription());
-        
+
         textFileUrl.setText(l
                 .getString(&quot;images.groupdetail.labelselecteddatabase&quot;));
-        
+
         if (object.getImageFile() != null &amp;&amp; object.getImageFile().length &gt; 0) {
             System.out.println(&quot;Versuche zu zeichnen&quot;);
             scaledImage = ideaImage = new Image(getDisplay(),
                     new ByteArrayInputStream(object.getImageFile()));
             canvasImg.redraw();
-        }else{
-            statusLine.setStatus(StatusLineStyledText.STATUS_WARN,&quot;Bilddaten k&#246;nnen f&#252;r Bild &quot;+ object.getImageFileName() +&quot;nicht geladen werden.&quot;);
+        } else {
+            statusLine.setStatus(StatusLineStyledText.STATUS_WARN,
+                    &quot;Bilddaten k&#246;nnen f&#252;r Bild &quot; + object.getImageFileName()
+                            + &quot;nicht geladen werden.&quot;);
             scaledImage = ideaImage = null;
             canvasImg.redraw();
         }
 
-
         //Buttons zum l&#246;schen und editieren aktivieren
 
         //Mode auf view setzen
@@ -1223,47 +1224,48 @@
             de.hsharz.provirent.objects.Image o = (de.hsharz.provirent.objects.Image) Imagelist
                     .get(i);
             item = new TableItem(tableImagesOverview, SWT.NONE);
-            
-            
+
             if (o.getImageFile() != null &amp;&amp; o.getImageFile().length &gt; 0) {
                 item.setImage(1, createThumbnailImage(o.getImageFile()));
-            }            
-            
-            item.setText(new String[] { o.getImageId() + &quot;&quot;,&quot;&quot;,
+            }
+
+            item.setText(new String[] { o.getImageId() + &quot;&quot;, &quot;&quot;,
                     o.getImageFileName(), o.getImageFileDescription() });
 
         }
         Imagelist = null;
     }
-    
-    private Image createThumbnailImage(byte[] data){
-        
+
+    private Image createThumbnailImage(byte[] data) {
+
         int maxheight = 75;
         int maxwidth = 75;
 
-        final Image image = new Image(getDisplay(),new ByteArrayInputStream(data));
+        final Image image = new Image(getDisplay(), new ByteArrayInputStream(
+                data));
         final int width = image.getBounds().width;
         final int height = image.getBounds().height;
         float scalefactor = 1;
-        
+
         if (width &gt; maxwidth) {
-            scalefactor = (float)maxwidth/width;
+            scalefactor = (float) maxwidth / width;
         }
         if (height &gt; maxheight) {
-            if ( ((float)maxheight/height)&lt; scalefactor ){
-                scalefactor = ((float)maxheight/height);
+            if (((float) maxheight / height) &lt; scalefactor) {
+                scalefactor = ((float) maxheight / height);
             }
-            
+
         }
-        
-        final Image scaledtemp = new Image(getDisplay(),
-                image.getImageData().scaledTo((int)(width*scalefactor),(int)(height*scalefactor)));
-        
-        System.out.println(&quot;Type:&quot;+image.getImageData().type);
-        
+
+        final Image scaledtemp = new Image(getDisplay(), image.getImageData()
+                .scaledTo((int) (width * scalefactor),
+                        (int) (height * scalefactor)));
+
+        System.out.println(&quot;Type:&quot; + image.getImageData().type);
+
         image.dispose();
-        
+
         return scaledtemp;
-        
+
     }
 }
\ No newline at end of file

Modified: project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/DialogMovie.java
===================================================================
--- project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/DialogMovie.java	2004-11-23 23:01:17 UTC (rev 157)
+++ project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/DialogMovie.java	2004-11-23 23:35:57 UTC (rev 158)
@@ -45,7 +45,7 @@
     public final static int TYPE_DIRECTOR = 4;
 
     private int type = 0;
-    
+
     private Shell dialogShell;
 
     private Group groupDialogDescription;
@@ -71,6 +71,12 @@
     private ResourceBundle l;
 
     private Shell shell;
+    
+    private int size_width = 200;
+    private int size_height = 210;
+    private int start_x = 50;
+    private int start_y = 50;
+
     /**
      * Auto-generated main method to display this org.eclipse.swt.widgets.Dialog
      * inside a new Shell.
@@ -85,7 +91,7 @@
             film.setImages(new ArrayList());
             film.setGenres(new ArrayList());
             film.setDirector(new ArrayList());
-            
+
             Shell shell = new Shell(display);
             DialogMovie inst = new DialogMovie(shell, SWT.NULL, Locale.GERMAN,
                     film, TYPE_IMAGE);
@@ -115,7 +121,8 @@
 
     }
 
-    public DialogMovie(Shell parent, int style, Locale locale, Movie movie, int type) {
+    public DialogMovie(Shell parent, int style, Locale locale, Movie movie,
+            int type) {
         super(parent, style);
         shell = parent;
         this.movie = movie;
@@ -123,274 +130,341 @@
         this.type = type;
     }
 
+    public DialogMovie(Shell parent, int style, Locale locale, Movie movie,
+            int type, int x, int y, int width, int height) {
+        super(parent, style);
+        shell = parent;
+        this.movie = movie;
+        initLanguage(locale);
+        this.type = type;
+        start_x = x;
+        start_y = y;
+        size_height = height;
+        size_width = width;
+    }
+    
+    
     public void open() {
-        try {
-            Shell parent = getParent();
-            dialogShell = new Shell(parent, SWT.DIALOG_TRIM
-                    | SWT.APPLICATION_MODAL);
-            dialogShell.setSize(200, 210);
-            dialogShell.setLayout(new GridLayout());
 
-            groupDialogDescription = new Group(dialogShell, SWT.NONE);
-            GridLayout groupDialogDescriptionLayout = new GridLayout();
-            groupDialogDescriptionLayout.numColumns = 5;
-            groupDialogDescriptionLayout.makeColumnsEqualWidth = true;
-            groupDialogDescription.setBounds(0, 0, 316, 178);
-            groupDialogDescription.setLayout(groupDialogDescriptionLayout);
+        Shell parent = getParent();
+        dialogShell = new Shell(parent, SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL);
+        dialogShell.setSize(size_width, size_height);
+        dialogShell.setBounds(start_x,start_y,size_width,size_height);
+        dialogShell.setLayout(new GridLayout());
 
-            if(type == TYPE_ACTOR){
-                groupDialogDescription.setText(l.getString(&quot;movies.dialog.title.actor&quot;));
+        groupDialogDescription = new Group(dialogShell, SWT.NONE);
+        GridLayout groupDialogDescriptionLayout = new GridLayout();
+        groupDialogDescriptionLayout.numColumns = 5;
+        groupDialogDescriptionLayout.makeColumnsEqualWidth = true;
+
+        groupDialogDescription.setLayout(groupDialogDescriptionLayout);
+
+        if (type == TYPE_ACTOR) {
+            groupDialogDescription.setText(l
+                    .getString(&quot;movies.dialog.title.actor&quot;));
+        } else if (type == TYPE_DIRECTOR) {
+            groupDialogDescription.setText(l
+                    .getString(&quot;movies.dialog.title.director&quot;));
+        } else if (type == TYPE_GENRE) {
+            groupDialogDescription.setText(l
+                    .getString(&quot;movies.dialog.title.genre&quot;));
+        } else if (type == TYPE_IMAGE) {
+            groupDialogDescription.setText(l
+                    .getString(&quot;movies.dialog.title.image&quot;));
+        }
+
+        GridData groupForm1LData = new GridData();
+        groupForm1LData.widthHint = 300;
+        groupForm1LData.heightHint = 200;
+        groupDialogDescription.setLayoutData(groupForm1LData);
+
+        text1 = new Text(groupDialogDescription, SWT.BORDER);
+        text1.setToolTipText(l.getString(&quot;movies.dialog.search.tooltip&quot;));
+
+        GridData text1LData = new GridData();
+        text1LData.horizontalSpan = 4;
+        text1LData.horizontalAlignment = GridData.FILL;
+        text1LData.grabExcessHorizontalSpace = true;
+        text1.setLayoutData(text1LData);
+
+        {
+            button1 = new Button(groupDialogDescription, SWT.PUSH | SWT.CENTER);
+            button1.setText(l.getString(&quot;movies.dialog.search.buttonname&quot;));
+
+            button1.addSelectionListener(new SelectionAdapter() {
+                public void widgetSelected(SelectionEvent evt) {
+                    refreshList(text1.getText());
+                }
+            });
+        }
+        {
+            labelDescriptionAdvice = new Label(groupDialogDescription, SWT.NONE);
+
+            if (type == TYPE_ACTOR) {
+                labelDescriptionAdvice.setText(l
+                        .getString(&quot;movies.dialog.labeltable.actor&quot;));
             } else if (type == TYPE_DIRECTOR) {
-                groupDialogDescription.setText(l.getString(&quot;movies.dialog.title.director&quot;));
+                labelDescriptionAdvice.setText(l
+                        .getString(&quot;movies.dialog.labeltable.director&quot;));
             } else if (type == TYPE_GENRE) {
-                groupDialogDescription.setText(l.getString(&quot;movies.dialog.title.genre&quot;));
+                labelDescriptionAdvice.setText(l
+                        .getString(&quot;movies.dialog.labeltable.genre&quot;));
             } else if (type == TYPE_IMAGE) {
-                groupDialogDescription.setText(l.getString(&quot;movies.dialog.title.image&quot;));
+                labelDescriptionAdvice.setText(l
+                        .getString(&quot;movies.dialog.labeltable.image&quot;));
             }
-            
 
-            GridData groupForm1LData = new GridData();
-            groupForm1LData.widthHint = 300;
-            groupForm1LData.heightHint = 200;
-            groupDialogDescription.setLayoutData(groupForm1LData);
+            table1 = new Table(groupDialogDescription, SWT.SINGLE
+                    | SWT.FULL_SELECTION);
+            GridData table1LData = new GridData();
+            table1LData.horizontalAlignment = GridData.FILL;
+            table1LData.horizontalSpan = 5;
+            table1LData.grabExcessHorizontalSpace = true;
+            table1LData.verticalAlignment = GridData.FILL;
+            table1LData.grabExcessVerticalSpace = true;
+            table1.setLayoutData(table1LData);
+            table1.setLinesVisible(true);
+            table1.setHeaderVisible(true);
+            {
+                TableColumn item = new TableColumn(table1, SWT.CENTER);
+                item.setText(l.getString(&quot;movies.dialog.column.id&quot;));
+                item.setWidth(0);
+                item.setResizable(false);
+            }
 
-            text1 = new Text(groupDialogDescription, SWT.BORDER);
-            text1.setToolTipText(l.getString(&quot;movies.dialog.search.tooltip&quot;));
-      
-            GridData text1LData = new GridData();
-            text1LData.horizontalSpan = 4;
-            text1LData.horizontalAlignment = GridData.FILL;
-            text1LData.grabExcessHorizontalSpace = true;
-            text1.setLayoutData(text1LData);
+            if (type == TYPE_IMAGE) {
+                TableColumn item = new TableColumn(table1, SWT.CENTER);
+                item.setAlignment(SWT.LEFT);
+                item.setWidth(100);
+                item.setText(l.getString(&quot;movies.dialog.column.thumb.image&quot;));
+            }
 
             {
-                button1 = new Button(groupDialogDescription, SWT.PUSH
-                        | SWT.CENTER);
-                button1.setText(l.getString(&quot;movies.dialog.search.buttonname&quot;));
-                
-                
-                
-                button1.addSelectionListener(new SelectionAdapter() {
-                    public void widgetSelected(SelectionEvent evt) {
-                            refreshList(text1.getText());
-                    }
-                });
+                TableColumn item = new TableColumn(table1, SWT.CENTER);
+                item.setAlignment(SWT.LEFT);
+                item.setWidth(100);
+
+                if (type == TYPE_ACTOR) {
+                    item.setText(l
+                            .getString(&quot;movies.dialog.column.lastname.actor&quot;));
+                } else if (type == TYPE_DIRECTOR) {
+                    item
+                            .setText(l
+                                    .getString(&quot;movies.dialog.column.lastname.director&quot;));
+                } else if (type == TYPE_GENRE) {
+                    item
+                            .setText(l
+                                    .getString(&quot;movies.dialog.column.name.genre&quot;));
+                } else if (type == TYPE_IMAGE) {
+                    item
+                            .setText(l
+                                    .getString(&quot;movies.dialog.column.name.image&quot;));
+                }
+
             }
             {
-                labelDescriptionAdvice = new Label(groupDialogDescription,
-                        SWT.NONE);
-                
-                if(type == TYPE_ACTOR){
-                    labelDescriptionAdvice
-                    .setText(l.getString(&quot;movies.dialog.labeltable.actor&quot;));
+                TableColumn item = new TableColumn(table1, SWT.CENTER);
+                item.setAlignment(SWT.LEFT);
+                item.setWidth(100);
+                if (type == TYPE_ACTOR) {
+                    item.setText(l
+                            .getString(&quot;movies.dialog.column.firstname.actor&quot;));
                 } else if (type == TYPE_DIRECTOR) {
-                    labelDescriptionAdvice
-                    .setText(l.getString(&quot;movies.dialog.labeltable.director&quot;));
+                    item
+                            .setText(l
+                                    .getString(&quot;movies.dialog.column.firstname.director&quot;));
                 } else if (type == TYPE_GENRE) {
-                    labelDescriptionAdvice
-                    .setText(l.getString(&quot;movies.dialog.labeltable.genre&quot;));
+                    item.setText(l
+                            .getString(&quot;movies.dialog.column.shortname.genre&quot;));
                 } else if (type == TYPE_IMAGE) {
-                    labelDescriptionAdvice
-                    .setText(l.getString(&quot;movies.dialog.labeltable.image&quot;));
+                    item
+                            .setText(l
+                                    .getString(&quot;movies.dialog.column.description.image&quot;));
+                    item.setWidth(150);
                 }
-                
-                
-                table1 = new Table(groupDialogDescription, SWT.SINGLE
-                        | SWT.FULL_SELECTION);
-                GridData table1LData = new GridData();
-                table1LData.horizontalAlignment = GridData.FILL;
-                table1LData.horizontalSpan = 5;
-                table1LData.grabExcessHorizontalSpace = true;
-                table1LData.verticalAlignment = GridData.FILL;
-                table1LData.grabExcessVerticalSpace = true;
-                table1.setLayoutData(table1LData);
-                {
-                    TableColumn item = new TableColumn(table1, SWT.CENTER);
-                    item.setText(l.getString(&quot;movies.dialog.column.id&quot;));
-                    item.setWidth(0);
-                    item.setResizable(false);
-                }
-                {
-                    TableColumn item = new TableColumn(table1, SWT.CENTER);
-                    item.setAlignment(SWT.LEFT);
-                    item.setWidth(100);
-                    
-                    if(type == TYPE_ACTOR){
-                        item.setText(l.getString(&quot;movies.dialog.column.lastname.actor&quot;));
-                    } else if (type == TYPE_DIRECTOR) {
-                        item.setText(l.getString(&quot;movies.dialog.column.lastname.director&quot;));
-                    } else if (type == TYPE_GENRE) {
-                        item.setText(l.getString(&quot;movies.dialog.column.name.genre&quot;));
-                    } else if (type == TYPE_IMAGE) {
-                        item.setText(l.getString(&quot;movies.dialog.column.name.image&quot;));
-                    }
+            }
 
-                }
-                {
-                    TableColumn item = new TableColumn(table1, SWT.CENTER);
-                    item.setAlignment(SWT.LEFT);
-                    item.setWidth(100);
-                    if(type == TYPE_ACTOR){
-                        item.setText(l.getString(&quot;movies.dialog.column.firstname.actor&quot;));
-                    } else if (type == TYPE_DIRECTOR) {
-                        item.setText(l.getString(&quot;movies.dialog.column.firstname.director&quot;));
-                    } else if (type == TYPE_GENRE) {
-                        item.setText(l.getString(&quot;movies.dialog.column.shortname.genre&quot;));
-                    } else if (type == TYPE_IMAGE) {
-                        item.setText(l.getString(&quot;movies.dialog.column.description.image&quot;));
-                    }
-                }
+            buttonDescriptionAccept = new Button(groupDialogDescription,
+                    SWT.PUSH | SWT.CENTER);
+            buttonDescriptionAccept.setText(l
+                    .getString(&quot;movies.dialog.buttonadd&quot;));
+            GridData buttonDescriptionAcceptLData2 = new GridData();
+            buttonDescriptionAcceptLData2.horizontalSpan = 2;
+            buttonDescriptionAcceptLData2.horizontalAlignment = GridData.FILL;
+            buttonDescriptionAccept
+                    .setLayoutData(buttonDescriptionAcceptLData2);
 
-                buttonDescriptionAccept = new Button(groupDialogDescription,
-                        SWT.PUSH | SWT.CENTER);
-                buttonDescriptionAccept.setText(l.getString(&quot;movies.dialog.buttonadd&quot;));
-                GridData buttonDescriptionAcceptLData2 = new GridData();
-                buttonDescriptionAcceptLData2.horizontalSpan = 2;
-                buttonDescriptionAcceptLData2.horizontalAlignment = GridData.FILL;
-                buttonDescriptionAccept
-                        .setLayoutData(buttonDescriptionAcceptLData2);
+            buttonDescriptionAccept
+                    .addSelectionListener(new SelectionAdapter() {
+                        public void widgetSelected(SelectionEvent evt) {
 
-                buttonDescriptionAccept.addSelectionListener(
-                        new SelectionAdapter() {
-                            public void widgetSelected(SelectionEvent evt) {
+                            int[] sel = table1.getSelectionIndices();
+                            for (int i = 0; i &lt; sel.length; i++) {
+                                System.out.println(&quot;Auswahl:&quot; + i + &quot; &quot;
+                                        + table1.getItem(sel[i]));
 
-
-                                int[] sel = table1.getSelectionIndices();
-                                for (int i = 0; i &lt; sel.length; i++) {
-                                    System.out.println(&quot;Auswahl:&quot; + i + &quot; &quot;
-                                            + table1.getItem(sel[i]));
-
-                                    System.out
-                                            .println(&quot;ID: &quot;
-                                                    + table1.getItem(sel[i])
-                                                            .getText(0));
-                                    for (int j = 0; j &lt; valuelist.size(); j++) {
-                                        System.out.println(&quot;Listid:&quot;
-                                                + ((Actor) valuelist.get(j))
-                                                        .getActorId() + &quot;&quot;);
+                                for (int j = 0; j &lt; valuelist.size(); j++) {
+                                    if (type == TYPE_ACTOR) {
                                         if ((table1.getItem(sel[i]).getText(0))
                                                 .equalsIgnoreCase(((Actor) valuelist
                                                         .get(j)).getActorId()
                                                         + &quot;&quot;)) {
-                                            System.out.println(&quot;gefunden&quot;);
                                             movie.getActors().add(
                                                     (Actor) valuelist.get(j));
+                                            break;
                                         }
+                                    } else if (type == TYPE_DIRECTOR) {
+                                        if ((table1.getItem(sel[i]).getText(0))
+                                                .equalsIgnoreCase(((Director) valuelist
+                                                        .get(j))
+                                                        .getDirectorId()
+                                                        + &quot;&quot;)) {
+                                            movie
+                                                    .getDirector()
+                                                    .add(
+                                                            (Director) valuelist
+                                                                    .get(j));
+                                            break;
+                                        }
+                                    } else if (type == TYPE_GENRE) {
+                                        if ((table1.getItem(sel[i]).getText(0))
+                                                .equalsIgnoreCase(((Genre) valuelist
+                                                        .get(j)).getGenreId()
+                                                        + &quot;&quot;)) {
+                                            movie.getGenres().add(
+                                                    (Genre) valuelist.get(j));
+                                            break;
+                                        }
+                                    } else if (type == TYPE_IMAGE) {
+                                        if ((table1.getItem(sel[i]).getText(0))
+                                                .equalsIgnoreCase(((Image) valuelist
+                                                        .get(j)).getImageId()
+                                                        + &quot;&quot;)) {
+                                            logger
+                                                    .debug(&quot;F&#252;ge Bild zum Movie hinzu:&quot;
+                                                            + (Image) valuelist
+                                                                    .get(j));
+                                            movie.getImages().add(
+                                                    (Image) valuelist.get(j));
+                                            break;
+                                        }
                                     }
-                                    table1.remove(sel[i]);
+
                                 }
 
-
+                                table1.remove(sel[i]);
                             }
-                        });
 
-            }
-            {
-                button2 = new Button(groupDialogDescription, SWT.FLAT
-                        | SWT.CENTER);
-                button2.setEnabled(false);
-                button2.setVisible(false);
-            }
+                        }
+                    });
 
-            buttonDescriptionAbort = new Button(groupDialogDescription,
-                    SWT.PUSH | SWT.CENTER);
-            buttonDescriptionAbort.setText(l.getString(&quot;movies.dialog.buttonfinish&quot;));
-            GridData buttonDescriptionAbortLData = new GridData();
-            buttonDescriptionAbortLData.horizontalAlignment = GridData.FILL;
-            buttonDescriptionAbortLData.horizontalSpan = 2;
-            buttonDescriptionAbort.setLayoutData(buttonDescriptionAbortLData);
-            buttonDescriptionAbort.addSelectionListener(new SelectionAdapter() {
-                public void widgetSelected(SelectionEvent evt) {
-                    dialogShell.close();
-                }
-            });
+        }
+        {
+            button2 = new Button(groupDialogDescription, SWT.FLAT | SWT.CENTER);
+            button2.setEnabled(false);
+            button2.setVisible(false);
+        }
 
-            dialogShell.layout();
-            dialogShell.pack();
-            dialogShell.open();
-            Display display = dialogShell.getDisplay();
-            while (!dialogShell.isDisposed()) {
-                if (!display.readAndDispatch())
-                    display.sleep();
+        buttonDescriptionAbort = new Button(groupDialogDescription, SWT.PUSH
+                | SWT.CENTER);
+        buttonDescriptionAbort.setText(l
+                .getString(&quot;movies.dialog.buttonfinish&quot;));
+        GridData buttonDescriptionAbortLData = new GridData();
+        buttonDescriptionAbortLData.horizontalAlignment = GridData.FILL;
+        buttonDescriptionAbortLData.horizontalSpan = 2;
+        buttonDescriptionAbort.setLayoutData(buttonDescriptionAbortLData);
+        buttonDescriptionAbort.addSelectionListener(new SelectionAdapter() {
+            public void widgetSelected(SelectionEvent evt) {
+                dialogShell.close();
             }
-        } catch (Exception e) {
-            e.printStackTrace();
+        });
+
+        dialogShell.layout();
+        dialogShell.pack();
+        dialogShell.open();
+        Display display = dialogShell.getDisplay();
+        while (!dialogShell.isDisposed()) {
+            if (!display.readAndDispatch())
+                display.sleep();
         }
+
     }
 
     private void refreshList(final String filter) {
         if (table1 == null || table1.isDisposed()) {
-            logger.warn(&quot;Konnte DialogMovie List nicht refreshen, da diese null ist!&quot;);
+            logger
+                    .warn(&quot;Konnte DialogMovie List nicht refreshen, da diese null ist!&quot;);
             return;
         }
         table1.removeAll();
-        
-        
-        if (type == TYPE_ACTOR){
-        valuelist = Database.getActorExcept(filter, this.movie.getActors());
-        for (int i = 0; i &lt; valuelist.size(); i++) {
-            Actor o = (Actor) valuelist.get(i);
-            TableItem item = new TableItem(table1, SWT.NONE);
-            item.setText(new String[] { o.getActorId() + &quot;&quot;, o.getLastName(),
-                    o.getFirstName() });
-        }
-        } else if (type == TYPE_DIRECTOR){
-            valuelist = Database.getDirectorExcept(filter, this.movie.getDirector());
+        table1.clearAll();
+        if (type == TYPE_ACTOR) {
+            valuelist = Database.getActorExcept(filter, this.movie.getActors());
             for (int i = 0; i &lt; valuelist.size(); i++) {
+                Actor o = (Actor) valuelist.get(i);
+                TableItem item = new TableItem(table1, SWT.NONE);
+                item.setText(new String[] { o.getActorId() + &quot;&quot;,
+                        o.getLastName(), o.getFirstName() });
+            }
+        } else if (type == TYPE_DIRECTOR) {
+            valuelist = Database.getDirectorExcept(filter, this.movie
+                    .getDirector());
+            for (int i = 0; i &lt; valuelist.size(); i++) {
                 Director o = (Director) valuelist.get(i);
                 TableItem item = new TableItem(table1, SWT.NONE);
-                item.setText(new String[] { o.getDirectorId() + &quot;&quot;, o.getLastName(),
-                        o.getFirstName() });
+                item.setText(new String[] { o.getDirectorId() + &quot;&quot;,
+                        o.getLastName(), o.getFirstName() });
             }
-        } else if (type == TYPE_GENRE){
+        } else if (type == TYPE_GENRE) {
             valuelist = Database.getGenreExcept(filter, this.movie.getGenres());
             for (int i = 0; i &lt; valuelist.size(); i++) {
                 Genre o = (Genre) valuelist.get(i);
                 TableItem item = new TableItem(table1, SWT.NONE);
                 item.setText(new String[] { o.getGenreId() + &quot;&quot;, o.getName(),
                         o.getShortname() });
-            }            
-        } else if (type == TYPE_IMAGE){            
-            valuelist = Database.getImagesExcept(filter, this.movie.getImages());
+            }
+        } else if (type == TYPE_IMAGE) {
+            valuelist = Database
+                    .getImagesExcept(filter, this.movie.getImages());
             for (int i = 0; i &lt; valuelist.size(); i++) {
                 Image o = (Image) valuelist.get(i);
                 TableItem item = new TableItem(table1, SWT.NONE);
 
-                
                 //Scale the image
                 int maxheight = 75;
                 int maxwidth = 75;
 
-                final org.eclipse.swt.graphics.Image image = new org.eclipse.swt.graphics.Image(shell.getDisplay(),new ByteArrayInputStream(o.getImageFile()));
+                final org.eclipse.swt.graphics.Image image = new org.eclipse.swt.graphics.Image(
+                        shell.getDisplay(), new ByteArrayInputStream(o
+                                .getImageFile()));
                 final int width = image.getBounds().width;
                 final int height = image.getBounds().height;
                 float scalefactor = 1;
-                
+
                 if (width &gt; maxwidth) {
-                    scalefactor = (float)maxwidth/width;
+                    scalefactor = (float) maxwidth / width;
                 }
                 if (height &gt; maxheight) {
-                    if ( ((float)maxheight/height)&lt; scalefactor ){
-                        scalefactor = ((float)maxheight/height);
+                    if (((float) maxheight / height) &lt; scalefactor) {
+                        scalefactor = ((float) maxheight / height);
                     }
-                    
+
                 }
-                
-                final org.eclipse.swt.graphics.Image scaledtemp = new org.eclipse.swt.graphics.Image(shell.getDisplay(),
-                        image.getImageData().scaledTo((int)(width*scalefactor),(int)(height*scalefactor)));
-                
-                item.setImage(1,scaledtemp);
-                item.setText(new String[] { o.getImageId() + &quot;&quot;, o.getImageFileName(),
-                        o.getImageFileDescription() });                
-                
+
+                final org.eclipse.swt.graphics.Image scaledtemp = new org.eclipse.swt.graphics.Image(
+                        shell.getDisplay(), image.getImageData().scaledTo(
+                                (int) (width * scalefactor),
+                                (int) (height * scalefactor)));
+
+                item.setImage(1, scaledtemp);
+                item.setText(new String[] { o.getImageId() + &quot;&quot;, &quot;&quot;,
+                        o.getImageFileName(), o.getImageFileDescription() });
+
                 //image.dispose();
                 //scaledtemp.dispose();
-                
-                
-                
-            }            
+
+            }
         }
-        
-        
+
     }
 }
\ No newline at end of file

Modified: project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/language/movies.properties
===================================================================
--- project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/language/movies.properties	2004-11-23 23:01:17 UTC (rev 157)
+++ project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/language/movies.properties	2004-11-23 23:35:57 UTC (rev 158)
@@ -71,8 +71,8 @@
 movies.dialog.column.shortname.genre=Kurzname
 movies.dialog.column.name.image=Name
 movies.dialog.column.description.image=Beschreibung
+movies.dialog.column.thumb.image=Vorschau
 
-
 movies.dialog.labeltable.actor=W&#228;hlen Sie einen Schaupieler:
 movies.dialog.labeltable.genre=W&#228;hlen Sie ein Genre:
 movies.dialog.labeltable.image=W&#228;hlen Sie ein Bild:


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000158.html">[Provirent-svn-commit] r157 - in project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui: . language
</A></li>
	<LI>Next message: <A HREF="000160.html">[Provirent-svn-commit] r159 - in project_src/provirent_hibernate/src: de/hsharz/provirent de/hsharz/provirent/management/gui de/hsharz/provirent/management/gui/language de/hsharz/provirent/objects de/hsharz/provirent/persistence test/provirent/hibernate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#159">[ date ]</a>
              <a href="thread.html#159">[ thread ]</a>
              <a href="subject.html#159">[ subject ]</a>
              <a href="author.html#159">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/provirent-svn-commit">More information about the Provirent-svn-commit
mailing list</a><br>
</body></html>
