<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Provirent-svn-commit] r170 - project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/provirent-svn-commit/2004-November/index.html" >
   <LINK REL="made" HREF="mailto:provirent-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BProvirent-svn-commit%5D%20r170%20-%20project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui&In-Reply-To=%3C200411251228.iAPCSURC015670%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000170.html">
   <LINK REL="Next"  HREF="000172.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Provirent-svn-commit] r170 - project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui</H1>
    <B>Remo Griesch at BerliOS</B> 
    <A HREF="mailto:provirent-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BProvirent-svn-commit%5D%20r170%20-%20project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui&In-Reply-To=%3C200411251228.iAPCSURC015670%40sheep.berlios.de%3E"
       TITLE="[Provirent-svn-commit] r170 - project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui">rgriesch at sheep.berlios.de
       </A><BR>
    <I>Thu Nov 25 13:28:30 CET 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000170.html">[Provirent-svn-commit] r169 - project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui
</A></li>
        <LI>Next message: <A HREF="000172.html">[Provirent-svn-commit] r171 - project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#171">[ date ]</a>
              <a href="thread.html#171">[ thread ]</a>
              <a href="subject.html#171">[ subject ]</a>
              <a href="author.html#171">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: rgriesch
Date: 2004-11-25 13:28:29 +0100 (Thu, 25 Nov 2004)
New Revision: 170

Added:
   project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeMovie.java
Log:


Added: project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeMovie.java
===================================================================
--- project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeMovie.java	2004-11-25 12:28:05 UTC (rev 169)
+++ project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui/CompositeMovie.java	2004-11-25 12:28:29 UTC (rev 170)
@@ -0,0 +1,1059 @@
+package de.hsharz.provirent.management.gui;
+
+import java.text.MessageFormat;
+import java.util.ArrayList;
+import java.util.Locale;
+import java.util.PropertyResourceBundle;
+import java.util.ResourceBundle;
+
+import org.apache.log4j.Logger;
+import org.eclipse.swt.SWT;
+import org.eclipse.swt.custom.SashForm;
+import org.eclipse.swt.events.FocusAdapter;
+import org.eclipse.swt.events.FocusEvent;
+import org.eclipse.swt.events.SelectionAdapter;
+import org.eclipse.swt.events.SelectionEvent;
+import org.eclipse.swt.graphics.Color;
+import org.eclipse.swt.graphics.Device;
+import org.eclipse.swt.graphics.DeviceData;
+import org.eclipse.swt.layout.FormAttachment;
+import org.eclipse.swt.layout.FormData;
+import org.eclipse.swt.layout.GridData;
+import org.eclipse.swt.layout.GridLayout;
+import org.eclipse.swt.widgets.Button;
+import org.eclipse.swt.widgets.Composite;
+import org.eclipse.swt.widgets.Display;
+import org.eclipse.swt.widgets.Event;
+import org.eclipse.swt.widgets.Group;
+import org.eclipse.swt.widgets.Label;
+import org.eclipse.swt.widgets.Listener;
+import org.eclipse.swt.widgets.Shell;
+import org.eclipse.swt.widgets.Table;
+import org.eclipse.swt.widgets.TableColumn;
+import org.eclipse.swt.widgets.Text;
+import org.eclipse.swt.custom.StyledText;
+
+import com.cloudgarden.resource.SWTResourceManager;
+
+import de.hsharz.provirent.objects.Movie;
+import de.hsharz.provirent.persistence.DataBaseException;
+import de.hsharz.provirent.persistence.Database;
+
+
+import org.eclipse.swt.widgets.List;
+/**
+* This code was generated using CloudGarden's Jigloo
+* SWT/Swing GUI Builder, which is free for non-commercial
+* use. If Jigloo is being used commercially (ie, by a corporation,
+* company or business for any purpose whatever) then you
+* should purchase a license for each developer using Jigloo.
+* Please visit www.cloudgarden.com for details.
+* Use of Jigloo implies acceptance of these licensing terms.
+* *************************************
+* A COMMERCIAL LICENSE HAS NOT BEEN PURCHASED
+* for this machine, so Jigloo or this code cannot be used legally
+* for any corporate or commercial purpose.
+* *************************************
+*/
+public class CompositeMovie extends de.hsharz.provirent.management.gui.AbstractComposite {
+
+    {
+        //Register as a resource user - SWTResourceManager will
+        //handle the obtaining and disposing of resources
+        SWTResourceManager.registerResourceUser(this);
+    }
+
+
+    /**
+     * Logger for this class
+     */
+    private static final Logger logger = Logger
+            .getLogger(CompositeActors.class);
+    
+    
+    private final static int MODE_VIEW = 0;
+    private final static int MODE_ADD = 1;
+    private final static int MODE_EDIT = 2;
+    
+    private Table tableMoviesOverview;
+    private Table tableMoviesOverviewDetail;
+    private TableColumn tableMoviesOverview_ColumnID;
+    private TableColumn tableMoviesOverview_ColumnTitle;
+    private TableColumn tableMoviesOverview_ColumnSubtitles;
+    private TableColumn tableMoviesOverview_ColumnDate;
+    private TableColumn tableMoviesOverviewDetail_ColumnGenres;
+    private TableColumn tableMoviesOverviewDetail_ColumnActors;
+    private TableColumn tableMoviesOverviewDetail_ColumnDirectors;   
+    private TableColumn tableMoviesOverviewDetail_ColumnDescription;
+    private TableColumn tableMoviesOverviewDetail_ColumnImages;
+       
+    private Group groupMovie;
+    private Group groupMoviesOverview;
+    private Group groupMoviesDetail;
+    
+    private Text textMoviesSearch;
+    private Text textMoviesID;
+    private Text textMoviesTitle;
+    private Text textMoviesDescription;
+    
+    private Label labelMoviesSearch;
+    private Label labelMoviesID;
+    private Label labelMoviesTitle;
+    private Label labelMoviesDate;
+    private Label labelMoviesAdvice;
+    
+    private Button buttonMoviesNew;
+    private Button buttonMoviesSave;
+    private Button buttonMoviesEdit;
+    private Button buttonMoviesCancel;
+    private Button buttonMoviesDelete;
+    private Button buttonMoviesFill;
+    private Button buttonMoviesEditActors;
+    private Button buttonMoviesEditDirectors;
+    private Button buttonMoviesEditGenres;
+    private Button buttonMoviesEditImages;
+     
+    private SashForm sashForm1;
+    
+    private Composite parent;
+    private Composite compositeButtons;
+    private List listMoviesImages;
+    private List listMoviesGenres;
+    private List listMoviesActors;
+    private List listMoviesDirectors;
+    private Text textMoviesDate;
+
+    protected int mode_actor;
+    
+    private StatusLineStyledText statusLine;
+    
+    private ResourceBundle l;
+    
+    
+    /*
+     * &#196;ndert die Sprache aller Elemente
+     * 
+     * @see de.hsharz.provirent.managment.gui.AbstractComposite#changeLanguage(java.util.Locale)
+     */
+    public void changeLanguage(Locale locale) {
+
+    }
+
+    /* 
+     * Init die Sprache (properties Datei)
+     * @see de.hsharz.provirent.managment.gui.AbstractComposite#initLanguage(java.util.Locale)
+     */
+    public void initLanguage(Locale locale) {
+
+        l = PropertyResourceBundle.getBundle(
+                &quot;de.hsharz.provirent.management.gui.language.movies&quot;, locale);
+
+    }
+    
+    
+    
+	/**
+	* Auto-generated main method to display this 
+	* de.hsharz.provirent.management.gui.AbstractComposite inside a new Shell.
+	*/
+	public static void main(String[] args) {
+		showGUI();
+	}
+		
+	/**
+	* Auto-generated method to display this 
+	* de.hsharz.provirent.management.gui.AbstractComposite inside a new Shell.
+	*/
+	/**
+	* Auto-generated method to display this 
+	* org.eclipse.swt.widgets.Composite inside a new Shell.
+	*/
+	public static void showGUI() {
+		Display display = Display.getDefault();
+		Shell shell = new Shell(display);
+
+		shell.open();
+		while (!shell.isDisposed()) {
+			if (!display.readAndDispatch())
+				display.sleep();
+		}
+	}
+
+	public CompositeMovie(Composite p, int style,
+            StatusLineStyledText status, Locale l) {
+	    super(p, style, status, l);
+        parent = p;
+        //Statusline wird gestzt
+        statusLine = status;
+        
+        //sprache wird init
+        initLanguage(l);
+	    
+	    
+		initGUI();
+	}
+
+
+	private void initGUI() {
+        if (logger.isDebugEnabled()) {
+            logger.debug(&quot;initGUI() - start&quot;);
+        }
+
+        this.setLayout(new GridLayout());
+        this.setSize(830, 650);
+        {
+            groupMovie = new Group(this, SWT.NONE);
+            GridLayout groupMovieLayout = new GridLayout();
+            GridData groupMovieLData = new GridData();
+            groupMovieLData.grabExcessHorizontalSpace = true;
+            groupMovieLData.grabExcessVerticalSpace = true;
+            groupMovieLData.horizontalAlignment = GridData.FILL;
+            groupMovieLData.verticalAlignment = GridData.FILL;
+            groupMovie.setLayoutData(groupMovieLData);
+            groupMovieLayout.makeColumnsEqualWidth = true;
+            groupMovie.setLayout(groupMovieLayout);
+            groupMovie.setText(l.getString(&quot;movies.group.label&quot;));
+            {
+                sashForm1 = new SashForm(groupMovie, SWT.NONE);
+                GridData sashForm1LData = new GridData();
+                sashForm1LData.verticalAlignment = GridData.FILL;
+                sashForm1LData.horizontalAlignment = GridData.FILL;
+                sashForm1LData.grabExcessHorizontalSpace = true;
+                sashForm1LData.grabExcessVerticalSpace = true;
+                sashForm1.setLayoutData(sashForm1LData);
+                
+               
+            }
+            // init the rest of the layout
+            initMoviesOverview();
+            initMoviesDetail();
+            refreshMoviesOverviewTable(textMoviesSearch.getText());
+        }
+
+        this.layout();
+
+
+        
+        if (logger.isDebugEnabled()) {
+            logger.debug(&quot;initGUI() - end&quot;);
+        }
+	}
+
+    /**
+     * 
+     */
+    private void initMoviesOverview() {
+	    //	  Group Movies Overview 
+        {
+            groupMoviesOverview = new Group(sashForm1,SWT.NONE);
+            GridLayout group1Layout = new GridLayout();
+            group1Layout.numColumns = 8;
+            groupMoviesOverview.setLayout(group1Layout);
+            groupMoviesOverview.setText(l.getString(&quot;movies.groupoverview.label&quot;));
+            
+            {// table Actors Overview
+                tableMoviesOverview = new Table(groupMoviesOverview, SWT.SINGLE | SWT.FULL_SELECTION | SWT.V_SCROLL | SWT.BORDER);
+                GridData tableMoviesOverviewLData = new GridData();
+                tableMoviesOverview.setHeaderVisible(true);
+                tableMoviesOverview.setLinesVisible(true);
+                tableMoviesOverviewLData.horizontalAlignment = GridData.FILL;
+                tableMoviesOverviewLData.verticalAlignment = GridData.FILL;
+                tableMoviesOverviewLData.horizontalSpan = 8;
+                tableMoviesOverviewLData.grabExcessHorizontalSpace = true;
+                tableMoviesOverviewLData.grabExcessVerticalSpace = true;
+                tableMoviesOverview.setLayoutData(tableMoviesOverviewLData);
+                tableMoviesOverview.addFocusListener(new FocusAdapter() {
+                        public void focusLost(FocusEvent evt) {
+                            System.out
+                                .println(&quot;tableMoviesOverview.focusLost, event=&quot;
+                                    + evt);
+                        }
+                        public void focusGained(FocusEvent evt) {
+                            System.out
+                                .println(&quot;tableMoviesOverview.focusGained, event=&quot;
+                                    + evt);
+                        }
+                    });
+                tableMoviesOverview.addSelectionListener(new SelectionAdapter() {
+                        public void widgetSelected(SelectionEvent evt) {
+                            if (logger.isDebugEnabled()) {
+                                logger
+                                    .debug(&quot;widgetSelected(SelectionEvent evt = &quot;
+                                        + evt
+                                        + &quot;) - start&quot;);
+                            }
+
+                            int index = tableMoviesOverview
+                                .getSelectionIndex();
+
+                            System.out.println(&quot;Table select. id: &quot;
+                                + index
+                                + &quot; TableItem:&quot;
+                                + tableMoviesOverview.getItem(index)
+                                + &quot; id: &quot;
+                                + tableMoviesOverview.getItem(index)
+                                    .getText(0));
+
+                            //es wurde ein Element aus Tabelle ausgewaehlt jetzt muss die
+                            //Detailansicht aktualisiert werden
+                            refreshMoviesDetail(tableMoviesOverview.getItem(index)
+                                                              .getText(0));
+
+                            if (logger.isDebugEnabled()) {
+                                logger
+                                    .debug(&quot;widgetSelected(SelectionEvent) - end&quot;);
+                            }
+                        }
+                    });
+                {
+                    tableMoviesOverview_ColumnID = new TableColumn(
+                        tableMoviesOverview,
+                        SWT.CENTER);
+                    tableMoviesOverview_ColumnID.setText(l
+                        .getString(&quot;movies.groupoverview.columnid&quot;));
+                    tableMoviesOverview_ColumnID.setWidth(40);
+                }
+                {
+                    tableMoviesOverview_ColumnTitle = new TableColumn(
+                        tableMoviesOverview,
+                        SWT.CENTER);
+                    tableMoviesOverview_ColumnTitle.setText(l
+                        .getString(&quot;movies.groupoverview.columntitle&quot;));
+                    tableMoviesOverview_ColumnTitle.setWidth(120);
+                }
+                {
+                    tableMoviesOverview_ColumnSubtitles = new TableColumn(
+                        tableMoviesOverview,
+                        SWT.CENTER);
+                    tableMoviesOverview_ColumnSubtitles.setText(l
+                        .getString(&quot;movies.groupoverview.columnsubtitles&quot;));
+                    tableMoviesOverview_ColumnSubtitles.setWidth(120);
+                }
+                {
+                    tableMoviesOverview_ColumnDate = new TableColumn(
+                        tableMoviesOverview,
+                        SWT.CENTER);
+                    tableMoviesOverview_ColumnDate.setText(l
+                        .getString(&quot;movies.groupoverview.columndate&quot;));
+                    tableMoviesOverview_ColumnDate.setWidth(120);
+                }
+            }// table Movies Overview
+            //Table Movies Overview Detail
+            tableMoviesOverviewDetail = new Table(
+                    groupMoviesOverview,
+                    SWT.SINGLE
+                        | SWT.FULL_SELECTION
+                        | SWT.V_SCROLL | SWT.BORDER);
+                GridData tableMoviesOverviewLData = new GridData();
+                tableMoviesOverviewDetail.setHeaderVisible(true);
+                tableMoviesOverviewDetail.setLinesVisible(true);
+                tableMoviesOverviewLData.horizontalAlignment = GridData.FILL;
+                tableMoviesOverviewLData.verticalAlignment = GridData.FILL;
+                tableMoviesOverviewLData.horizontalSpan = 8;
+                tableMoviesOverviewLData.grabExcessHorizontalSpace = true;
+                tableMoviesOverviewLData.grabExcessVerticalSpace = true;
+                tableMoviesOverviewDetail.setLayoutData(tableMoviesOverviewLData);
+                tableMoviesOverviewDetail.addFocusListener(new FocusAdapter() {
+                        public void focusLost(FocusEvent evt) {
+                            System.out
+                                .println(&quot;tableMoviesOverviewDetail.focusLost, event=&quot;
+                                    + evt);
+                        }
+                        public void focusGained(FocusEvent evt) {
+                            System.out
+                                .println(&quot;tableMoviesOverviewDetail.focusGained, event=&quot;
+                                    + evt);
+                        }
+                    });
+                tableMoviesOverviewDetail.addSelectionListener(new SelectionAdapter() {
+                        public void widgetSelected(SelectionEvent evt) {
+                            if (logger.isDebugEnabled()) {
+                                logger
+                                    .debug(&quot;widgetSelected(SelectionEvent evt = &quot;
+                                        + evt
+                                        + &quot;) - start&quot;);
+                            }
+
+                            int index = tableMoviesOverview
+                                .getSelectionIndex();
+
+                            System.out.println(&quot;Table select. id: &quot;
+                                + index
+                                + &quot; TableItem:&quot;
+                                + tableMoviesOverviewDetail.getItem(index)
+                                + &quot; id: &quot;
+                                + tableMoviesOverviewDetail.getItem(index)
+                                    .getText(0));
+
+                            //es wurde ein Element aus Tabelle ausgewaehlt jetzt muss die
+                            //Detailansicht aktualisiert werden
+                            //folgende Zeile nicht notwendig
+                            //refreshMoviesDetail(tableMoviesOverview.getItem(index).getText(0));
+
+                            if (logger.isDebugEnabled()) {
+                                logger
+                                    .debug(&quot;widgetSelected(SelectionEvent) - end&quot;);
+                            }
+                        }
+                    });
+                {
+                    tableMoviesOverviewDetail_ColumnDirectors = new TableColumn(
+                        tableMoviesOverviewDetail,
+                        SWT.CENTER);
+                    tableMoviesOverviewDetail_ColumnDirectors.setText(l
+                        .getString(&quot;movies.groupoverviewdetail.columndirectors&quot;));
+                    tableMoviesOverviewDetail_ColumnDirectors.setWidth(80);
+                }
+                {
+                    tableMoviesOverviewDetail_ColumnGenres = new TableColumn(
+                        tableMoviesOverviewDetail,
+                        SWT.CENTER);
+                    tableMoviesOverviewDetail_ColumnGenres.setText(l
+                        .getString(&quot;movies.groupoverviewdetail.columngenres&quot;));
+                    tableMoviesOverviewDetail_ColumnGenres.setWidth(80);
+                }
+                {
+                    tableMoviesOverviewDetail_ColumnActors = new TableColumn(
+                        tableMoviesOverviewDetail,
+                        SWT.CENTER);
+                    tableMoviesOverviewDetail_ColumnActors.setText(l
+                        .getString(&quot;movies.groupoverviewdetail.columnactors&quot;));
+                    tableMoviesOverviewDetail_ColumnActors.setWidth(80);
+                }
+                {
+                    tableMoviesOverviewDetail_ColumnDescription = new TableColumn(
+                        tableMoviesOverviewDetail,
+                        SWT.CENTER);
+                    tableMoviesOverviewDetail_ColumnDescription.setText(l
+                        .getString(&quot;movies.groupoverviewdetail.columndescription&quot;));
+                    tableMoviesOverviewDetail_ColumnDescription.setWidth(80);
+                }
+                {
+                    tableMoviesOverviewDetail_ColumnImages = new TableColumn(
+                        tableMoviesOverviewDetail,
+                        SWT.CENTER);
+                    tableMoviesOverviewDetail_ColumnImages.setText(l
+                        .getString(&quot;movies.groupoverviewdetail.columnimages&quot;));
+                    tableMoviesOverviewDetail_ColumnImages.setWidth(80);
+                }
+            // Search
+            {
+                //label for Search
+                labelMoviesSearch = new Label(groupMoviesOverview, SWT.NONE);
+                labelMoviesSearch.setText(l
+                        .getString(&quot;movies.groupoverview.searchlabel&quot;)
+                        + &quot;:&quot;);
+                GridData label2LData = new GridData();
+                label2LData.horizontalSpan = 3;
+                labelMoviesSearch.setLayoutData(label2LData);
+
+                //text Search
+                textMoviesSearch = new Text(groupMoviesOverview, SWT.BORDER);
+                GridData text2LData = new GridData();
+                textMoviesSearch.addFocusListener(new FocusAdapter() {
+                    public void focusLost(FocusEvent evt) {
+                        if (logger.isDebugEnabled()) {
+                            logger.debug(&quot;focusLost(FocusEvent evt = &quot; + evt + &quot; &quot;
+                                    + textMoviesSearch.getText() + &quot;) - start&quot;);
+                        }
+
+                        refreshMoviesOverviewTable(textMoviesSearch.getText());
+
+                        if (logger.isDebugEnabled()) {
+                            logger.debug(&quot;focusLost(FocusEvent) - end&quot;);
+                        }
+                    }
+                });
+                textMoviesSearch.addListener(SWT.DefaultSelection, new Listener() {
+                    public void handleEvent(Event e) {
+                        if (logger.isDebugEnabled()) {
+                            logger.debug(&quot;handleEvent(Event e = &quot; + e + &quot; &quot;
+                                    + textMoviesSearch.getText() + &quot;) - start&quot;);
+                        }
+
+                        refreshMoviesOverviewTable(textMoviesSearch.getText());
+
+                        if (logger.isDebugEnabled()) {
+                            logger.debug(&quot;handleEvent(Event) - end&quot;);
+                        }
+                    }
+                    
+                });
+                text2LData.horizontalAlignment = GridData.FILL;
+                text2LData.horizontalSpan = 5;
+                text2LData.grabExcessHorizontalSpace = true;
+                textMoviesSearch.setLayoutData(text2LData);
+            }// Search                    
+        }
+    }
+
+
+    /**
+     * 
+     */
+    private void initMoviesDetail() {
+        // Group Actors Detail
+        {
+            groupMoviesDetail = new Group(sashForm1, SWT.H_SCROLL);
+            GridLayout group2Layout = new GridLayout();
+            GridData group2LData = new GridData();
+            group2Layout.verticalSpacing = 15;
+            group2Layout.numColumns = 6;
+            groupMoviesDetail.setText(l.getString(&quot;movies.groupdetail.label&quot;));   
+            FormData formData = new FormData();
+            groupMoviesDetail.setLayout(group2Layout);
+            formData.right = new FormAttachment(100, 100, -5);
+            formData.top = new FormAttachment(0, 100, 5);
+            formData.bottom = new FormAttachment(100, 100, -5);
+            groupMoviesDetail.setLayoutData(formData);
+        }
+//      labels and text for detail
+    	{
+    	    labelMoviesID = new Label(groupMoviesDetail, SWT.NONE);
+    	    labelMoviesID.setText(l
+    	            .getString(&quot;movies.groupdetail.labelid&quot;)
+    	            + &quot;:&quot;);
+    	    labelMoviesID.setSize(125, 15);
+    	    GridData formData2 = new GridData();
+    	    formData2.heightHint = 15;
+    	    formData2.horizontalAlignment = GridData.FILL;
+    	    labelMoviesID.setLayoutData(formData2);
+    	}
+    	{
+    	    textMoviesID = new Text(
+    	            groupMoviesDetail,
+    	            SWT.READ_ONLY | SWT.BORDER);
+    	    GridData text1LData1 = new GridData();
+    	    text1LData1.horizontalAlignment = GridData.FILL;
+    	    text1LData1.heightHint = 13;
+    	    text1LData1.horizontalSpan = 5;
+    	    text1LData1.grabExcessHorizontalSpace = true;
+    	    textMoviesID.setLayoutData(text1LData1);
+    	}
+    	{
+            labelMoviesTitle = new Label(
+                groupMoviesDetail,
+                SWT.NONE);
+            labelMoviesTitle.setText(l
+                .getString(&quot;movies.groupdetail.labeltitle&quot;)
+                + &quot;:&quot;);
+            labelMoviesTitle.setSize(125, 15);
+            GridData labelActorNameLData = new GridData();
+            labelActorNameLData.heightHint = 15;
+            labelActorNameLData.horizontalAlignment = GridData.FILL;
+            labelMoviesTitle.setLayoutData(labelActorNameLData);
+        }
+        {
+    	    textMoviesTitle = new Text(groupMoviesDetail,
+    	            SWT.READ_ONLY | SWT.BORDER);
+    	    GridData text1LData2 = new GridData();
+    	    text1LData2.horizontalAlignment = GridData.FILL;
+    	    text1LData2.heightHint = 13;
+    	    text1LData2.horizontalSpan = 5;
+    	    text1LData2.grabExcessHorizontalSpace = true;
+    	    textMoviesTitle.setLayoutData(text1LData2);        
+    	}     
+        {
+            labelMoviesDate = new Label(
+                groupMoviesDetail,
+                SWT.NONE);
+            labelMoviesDate.setText(l
+                .getString(&quot;movies.groupdetail.labeldate&quot;)
+                + &quot;:&quot;);
+            labelMoviesDate.setSize(125, 15);
+            GridData labelActorNameLData = new GridData();
+            labelActorNameLData.heightHint = 15;
+            labelActorNameLData.horizontalAlignment = GridData.FILL;
+            labelMoviesDate.setLayoutData(labelActorNameLData);
+        }
+        {
+            textMoviesDate = new Text(groupMoviesDetail, SWT.READ_ONLY
+                | SWT.BORDER);
+            GridData text1LData2 = new GridData();
+            text1LData2.horizontalAlignment = GridData.FILL;
+            text1LData2.heightHint = 13;
+            text1LData2.horizontalSpan = 5;
+            text1LData2.grabExcessHorizontalSpace = true;
+            textMoviesDate.setLayoutData(text1LData2);
+            textMoviesDate.setText(l.getString(&quot;movies.groupdetail.textdate&quot;));
+        }
+        //labels and buttons for Detail
+        {
+    	    labelMoviesAdvice = new Label(groupMoviesDetail, SWT.NONE);
+    	    labelMoviesAdvice.setText(l.getString(&quot;movies.groupdetail.textdescription&quot;));
+    	    GridData formData2 = new GridData();
+    	    formData2.horizontalSpan = 1;
+    	    formData2.verticalSpan = 5;
+    	    labelMoviesAdvice.setLayoutData(formData2);
+    	}
+        {
+            textMoviesDescription = new Text(groupMoviesDetail, SWT.MULTI | SWT.READ_ONLY | SWT.V_SCROLL | SWT.BORDER);
+            GridData formData2 = new GridData();
+    	    formData2.horizontalSpan = 5;
+    	    formData2.verticalSpan = 5;
+    	    formData2.verticalAlignment = GridData.FILL;
+    	    formData2.horizontalAlignment = GridData.FILL;
+    	    textMoviesDescription.setLayoutData(formData2);
+        }
+        {
+            buttonMoviesEditDirectors = new Button(groupMoviesDetail
+                    , SWT.NONE);
+            buttonMoviesEditDirectors.setText(l
+                .getString(&quot;movies.button.editdirectors&quot;));
+            buttonMoviesEditDirectors.setEnabled(false);
+            GridData text1LData2 = new GridData();
+    	    text1LData2.horizontalAlignment = GridData.FILL;
+    	    text1LData2.heightHint = 20;
+    	    text1LData2.grabExcessHorizontalSpace = true;
+    	    text1LData2.verticalSpan = 2;
+    	    buttonMoviesEditDirectors.setLayoutData(text1LData2);        
+            buttonMoviesEditDirectors.addSelectionListener(new SelectionAdapter() {
+                public void widgetSelected(SelectionEvent evt) {
+                   // TODO
+                    
+                }
+            });  
+        }
+        {
+            listMoviesDirectors = new List(groupMoviesDetail, SWT.BORDER);
+            GridData listMoviesDirectorsLData = new GridData();
+            listMoviesDirectorsLData.horizontalAlignment = GridData.FILL;
+            listMoviesDirectorsLData.horizontalSpan = 5;
+            listMoviesDirectorsLData.verticalSpan = 2;
+            listMoviesDirectors.setLayoutData(listMoviesDirectorsLData);
+        }
+        {
+            buttonMoviesEditActors = new Button(groupMoviesDetail
+                    , SWT.NONE);
+            buttonMoviesEditActors.setText(l
+                .getString(&quot;movies.button.editactors&quot;));
+            buttonMoviesEditActors.setEnabled(false);
+            GridData text1LData2 = new GridData();
+            text1LData2.verticalSpan = 2;
+            text1LData2.horizontalSpan = 1;
+    	    text1LData2.horizontalAlignment = GridData.FILL;
+    	    text1LData2.heightHint = 20;
+    	    text1LData2.grabExcessHorizontalSpace = true;
+    	    buttonMoviesEditActors.setLayoutData(text1LData2);        
+            buttonMoviesEditActors.addSelectionListener(new SelectionAdapter() {
+                public void widgetSelected(SelectionEvent evt) {
+                   // TODO
+                    
+                }
+            });  
+        }
+        {
+            listMoviesActors = new List(groupMoviesDetail, SWT.BORDER);
+            GridData listMoviesActorsLData = new GridData();
+            listMoviesActorsLData.horizontalAlignment = GridData.FILL;
+            listMoviesActorsLData.horizontalSpan = 5;
+            listMoviesActorsLData.verticalSpan = 2;
+            listMoviesActors.setLayoutData(listMoviesActorsLData);
+        }
+        {
+            buttonMoviesEditGenres = new Button(groupMoviesDetail
+                    , SWT.NONE);
+            buttonMoviesEditGenres.setText(l
+                .getString(&quot;movies.button.editgenres&quot;));
+            buttonMoviesEditGenres.setEnabled(false);
+            GridData text1LData2 = new GridData();
+    	    text1LData2.horizontalAlignment = GridData.FILL;
+    	    text1LData2.heightHint = 20;
+    	    text1LData2.grabExcessHorizontalSpace = true;
+    	    text1LData2.verticalSpan = 2;
+    	    buttonMoviesEditGenres.setLayoutData(text1LData2);        
+            buttonMoviesEditGenres.addSelectionListener(new SelectionAdapter() {
+                public void widgetSelected(SelectionEvent evt) {
+                   // TODO
+                    
+                }
+            });  
+        }
+        {
+            listMoviesGenres = new List(groupMoviesDetail, SWT.BORDER);
+            GridData listMoviesGenresLData = new GridData();
+            listMoviesGenresLData.horizontalSpan = 5;
+            listMoviesGenresLData.verticalSpan = 2;
+            listMoviesGenresLData.horizontalAlignment = GridData.FILL;
+            listMoviesGenres.setLayoutData(listMoviesGenresLData);
+        }
+        {
+            buttonMoviesEditImages = new Button(groupMoviesDetail
+                    , SWT.NONE);
+            buttonMoviesEditImages.setText(l
+                .getString(&quot;movies.button.editimages&quot;));
+            buttonMoviesEditImages.setEnabled(false);
+            GridData text1LData2 = new GridData();
+    	    text1LData2.heightHint = 20;
+    	    text1LData2.horizontalSpan = 1;
+    	    text1LData2.horizontalAlignment = GridData.FILL;
+    	    buttonMoviesEditImages.setLayoutData(text1LData2);        
+            buttonMoviesEditImages.addSelectionListener(new SelectionAdapter() {
+                public void widgetSelected(SelectionEvent evt) {
+                   // TODO
+                    
+                }
+            });  
+        }
+        {
+            listMoviesImages = new List(groupMoviesDetail, SWT.BORDER);
+            GridData listMoviesImagesLData = new GridData();
+            listMoviesImagesLData.horizontalSpan = 5;
+            listMoviesImagesLData.horizontalAlignment = GridData.FILL;
+            listMoviesImages.setLayoutData(listMoviesImagesLData);
+        }
+        {
+    	    compositeButtons = new Composite(groupMoviesDetail, SWT.EMBEDDED);
+    	    GridLayout composite2Layout = new GridLayout();
+    	    composite2Layout.numColumns = 6;
+    	    GridData composite2LData = new GridData();
+    	    compositeButtons.setLayout(composite2Layout);
+    	    composite2LData.verticalAlignment = GridData.END;
+    	    composite2LData.horizontalAlignment = GridData.CENTER;
+    	    composite2LData.widthHint = 391;
+    	    composite2LData.horizontalSpan = 6;
+    	    composite2LData.grabExcessHorizontalSpace = true;
+        	composite2LData.grabExcessVerticalSpace = true;
+        	composite2LData.heightHint = 35;
+        	compositeButtons.setLayoutData(composite2LData);
+    	}
+    	{
+    	    buttonMoviesNew = new Button(compositeButtons, SWT.PUSH | SWT.CENTER);
+    	    buttonMoviesNew.setText(l.getString(&quot;button.new&quot;));
+    	    buttonMoviesNew.addSelectionListener(new SelectionAdapter() {
+            public void widgetSelected(SelectionEvent evt) {
+                
+                mode_actor = ManagementGui.MODE_ADD;
+                
+                textMoviesID.setText(&quot;&quot;);
+                textMoviesTitle.setText(&quot;&quot;);
+                textMoviesDate.setText(&quot;&quot;);
+                textMoviesDescription.setText(&quot;&quot;);
+                textMoviesTitle.setEditable(true);
+                textMoviesDate.setEditable(true);
+                textMoviesDescription.setEditable(true);
+                
+                buttonMoviesCancel.setEnabled(true);
+                buttonMoviesSave.setEnabled(true);
+                buttonMoviesNew.setEnabled(false);
+                buttonMoviesEdit.setEnabled(false);
+                buttonMoviesDelete.setEnabled(false);
+                buttonMoviesEditDirectors.setEnabled(true);
+                buttonMoviesEditActors.setEnabled(true);
+                buttonMoviesEditGenres.setEnabled(true);
+                buttonMoviesEditImages.setEnabled(true);
+                
+                textMoviesSearch.setEditable(false);
+                tableMoviesOverview.setEnabled(false);
+
+            }
+        });
+
+    	    buttonMoviesEdit = new Button(compositeButtons, SWT.PUSH | SWT.CENTER);
+    	    buttonMoviesEdit.setText(l.getString(&quot;button.edit&quot;));
+    	    buttonMoviesEdit.setEnabled(false);
+    	    buttonMoviesEdit.addSelectionListener(new SelectionAdapter() {
+            public void widgetSelected(SelectionEvent evt) {
+
+                mode_actor = ManagementGui.MODE_EDIT;
+
+                textMoviesID.setEditable(false);
+                textMoviesTitle.setEditable(true);
+                textMoviesTitle.setFocus();
+                textMoviesDate.setEditable(true);
+                
+                buttonMoviesCancel.setEnabled(true);
+                buttonMoviesSave.setEnabled(true);
+                buttonMoviesNew.setEnabled(false);
+                buttonMoviesEdit.setEnabled(false);
+                buttonMoviesDelete.setEnabled(false);
+
+                tableMoviesOverview.setEnabled(false);
+                textMoviesSearch.setEnabled(false);
+                
+            }
+        });
+
+    	    buttonMoviesDelete = new Button(compositeButtons, SWT.PUSH | SWT.CENTER);
+    	    buttonMoviesDelete.setText(l.getString(&quot;button.delete&quot;));
+    	    buttonMoviesDelete.setEnabled(false);
+    	    buttonMoviesDelete.addSelectionListener(new SelectionAdapter() {
+            public void widgetSelected(SelectionEvent evt) {
+                System.out
+                        .println(&quot;buttonMoviesDelete.widgetSelected, event=&quot;
+                                + evt);
+                
+                
+               String msg = MessageFormat.format(
+                       l.getString(&quot;movies.groupdetail.deletebutton.question.text&quot;),
+                               new Object[]{textMoviesTitle.getText()+&quot; &quot;
+                               +l.getString(&quot;movies.groupdetail.deletebutton.question.gap&quot;)
+                               +&quot; &quot;+textMoviesDate.getText()});
+                
+               int question = showMsg(msg,
+                       l.getString(&quot;movies.groupdetail.deletebutton.question.header&quot;), 
+                       SWT.ICON_QUESTION | SWT.YES | SWT.NO);
+               
+               if (question != SWT.YES){
+                   return;
+               }
+                
+                Movie o = new Movie();
+                o.setMovieId(new Integer(Integer.parseInt(textMoviesID.getText())));
+                o.setTitle(textMoviesTitle.getText());
+                //TODO
+                //entsprechendes Objekt erzeugen
+                //o.setReleaseDate(textMoviesDate.getText());
+                
+                try {
+                    //object speichern
+                    // Fehlerbehandlung
+                    Database.deleteObject(o);
+
+                    //&#220;bersichtsTabelle aktualisieren
+                    refreshMoviesOverviewTable(textMoviesSearch.getText());
+                    
+                    //Detailansicht leeren
+                    textMoviesID.setText(&quot;&quot;);
+                    textMoviesTitle.setText(&quot;&quot;);
+                    textMoviesDate.setText(&quot;&quot;);
+                    tableMoviesOverviewDetail.removeAll();
+                    //in Tabelle n&#228;chsten ausw&#228;hlen
+                    try {
+                        tableMoviesOverview.select(0);
+                    } catch (Exception ex) {}
+                    
+                    //Statusline Nachricht sezten
+                    statusLine.setStatus(1,l.getString(&quot;movies.groupdetail.deletebutton.newok&quot;));
+
+                } catch (DataBaseException e) {
+                    if (e.getMessage().equalsIgnoreCase(&quot;1&quot;)) {
+                        //Fehler beim Speichern des Objectes
+
+                        statusLine.setStatus(3,l.getString(&quot;movies.groupdetail.deletebutton.errorsave&quot;));
+                        showMsg(l.getString(&quot;movies.groupdetail.deletebutton.errorsave&quot;),
+                                l.getString(&quot;error&quot;), SWT.ICON_ERROR | SWT.OK);
+                        
+                    } else if (e.getMessage().equalsIgnoreCase(&quot;2&quot;)) {
+                        //fehler beim db aufbau
+                        statusLine.setStatus(3,l.getString(&quot;movies.groupdetail.deletebutton.errordb&quot;));
+                        showMsg(l.getString(&quot;movies.groupdetail.deletebutton.errordb&quot;),
+                                l.getString(&quot;error&quot;), SWT.ICON_ERROR | SWT.OK);
+                        
+                    } else {
+                        //@todo
+                        e.printStackTrace();
+                    }
+                    
+                }                
+                
+
+                }
+
+            }
+    	    );
+
+    	    //leerer nicht sichtbarer Button
+    	    buttonMoviesFill = new Button(compositeButtons, SWT.PUSH | SWT.CENTER);
+    	    GridData buttonActorFillLData = new GridData();
+    	    buttonMoviesFill.setVisible(false);
+    	    buttonMoviesFill.setEnabled(false);
+    	    buttonActorFillLData.widthHint = 30;
+    	    buttonActorFillLData.heightHint = 23;
+    	    buttonMoviesFill.setLayoutData(buttonActorFillLData);
+
+    	    buttonMoviesSave = new Button(compositeButtons, SWT.PUSH | SWT.CENTER);
+    	    buttonMoviesSave.setText(l.getString(&quot;button.save&quot;));
+    	    buttonMoviesSave.setEnabled(false);
+    	    buttonMoviesSave.addSelectionListener(new SelectionAdapter() {
+            public void widgetSelected(SelectionEvent evt) {
+                System.out
+                        .println(&quot;buttonMoviesSave.widgetSelected, event=&quot;
+                                + evt);
+
+                
+                //testen ob Name leer ist
+                //TODO
+                //komplette Speichervorgan muss erweitert werden da
+                //Ausma&#223; von Film gr&#246;&#223;er als bei anderen Composite
+                /*
+                if (textActorsFName.getText().trim().equalsIgnoreCase(&quot;&quot;) 
+                    ||  textActorsLName.getText().trim().equalsIgnoreCase(&quot;&quot;)   ) {
+                    
+                    showMsg(l.getString(&quot;actors.groupdetail.savebutton.warn.noname.msg&quot;),
+                            l.getString(&quot;actors.groupdetail.savebutton.warn.noname.title&quot;),
+                            SWT.ICON_WARNING | SWT.YES);
+
+                    	return;
+                }
+                
+                //testen welcher mode
+                
+                if (mode_actor == ManagementGui.MODE_ADD) {
+                */    
+                    /**
+                     * @todo eine Exception bekommen wieder leider NOCH nicht mit
+                     * d.h. es muss noch ein r&#252;ckgabewert kommen oder eine Exception 
+                     * &#252;bermitteln werden (aus der DB Klasse)
+                     */
+                    //neues Objekt erzeugen
+                /*
+                	Actor tmp = new Actor(textActorsFName.getText(),
+                            textActorsLName.getText());
+                    
+                    try {
+                        //object speichern
+                        // Fehlerbehandlung
+                        Object o = Database.saveObject(
+                                new Actor(textActorsFName.getText(),
+                                        textActorsLName.getText()));
+                        
+                        // in &#220;bersichtstabelle einf&#252;gen
+                        insertIntoActorsOverviewTable((Actor)o);
+                        textActorsID.setText( ((Actor)o).getActorId()+&quot;&quot; );
+                        
+                        
+                        //Statusline Nachricht sezten
+                        statusLine.setStatus(1,l.getString(&quot;actors.groupdetail.savebutton.newok&quot;));
+
+                    } catch (DataBaseException e) {
+                        if (e.getMessage().equalsIgnoreCase(&quot;1&quot;)) {
+                            //Fehler beim Speichern des Objectes
+
+                            statusLine.setStatus(3,l.getString(&quot;actors.groupdetail.savebutton.errorsave&quot;));
+                            showMsg(l.getString(&quot;actors.groupdetail.savebutton.errorsave&quot;),&quot;Fehler&quot;, SWT.ICON_ERROR | SWT.OK);
+                            
+                        } else if (e.getMessage().equalsIgnoreCase(&quot;2&quot;)) {
+                            //fehler beim db aufbau
+                            statusLine.setStatus(3,l.getString(&quot;actors.groupdetail.savebutton.errordb&quot;));
+                            showMsg(l.getString(&quot;actors.groupdetail.savebutton.errordb&quot;),&quot;Fehler&quot;, SWT.ICON_ERROR | SWT.OK);
+                            
+                        } else {
+                            //@todo
+                            e.printStackTrace();
+                        }
+                        
+                    }
+                    
+                    
+                    //alle Buttons auf aktiv setzen
+                    setActorsGroupButtonSaveCancel();
+                    
+                } else if (mode_actor == ManagementGui.MODE_EDIT) {
+                    
+                    Actor tmp = new Actor(textActorsFName.getText(),
+                                    textActorsLName.getText());
+        		tmp.setActorId( new Integer (Integer.parseInt(textActorsID.getText())) );
+                try {
+                    //object speichern
+                    // Fehlerbehandlung
+                    Database.saveObject(tmp);
+                    //&#220;bersichtstabelle aktualisieren
+                    refreshActorsOverviewTable(textActorsSearch.getText());
+                    
+                    //Statusline Nachricht sezten
+                    statusLine.setStatus(1,l.getString(&quot;actors.groupdetail.savebutton.editok&quot;));
+                   
+
+                } catch (DataBaseException e) {
+                    if (e.getMessage().equalsIgnoreCase(&quot;1&quot;)) {
+                        //Fehler beim Speichern des Objectes
+
+                        statusLine.setStatus(3,l.getString(&quot;actors.groupdetail.savebutton.errorsave&quot;));
+                        showMsg(l.getString(&quot;actors.groupdetail.savebutton.errorsave&quot;),&quot;Fehler&quot;, SWT.ICON_ERROR | SWT.OK);
+                        
+                    } else if (e.getMessage().equalsIgnoreCase(&quot;2&quot;)) {
+                        //fehler beim db aufbau
+                        statusLine.setStatus(3,l.getString(&quot;actors.groupdetail.savebutton.errordb&quot;));
+                        showMsg(l.getString(&quot;actors.groupdetail.savebutton.errordb&quot;),&quot;Fehler&quot;, SWT.ICON_ERROR | SWT.OK);
+                        
+                    } else {
+                        //@todo
+                        e.printStackTrace();
+                    }
+                    
+                }
+                    
+ 
+                    //alle Buttons auf aktiv setzen
+                    setActorsGroupButtonSaveCancel();
+                    
+                }
+                
+                
+                
+                
+                 // @todo Exception werfen, da nur die zwei Modes sein d&#252;rfen
+                 
+            */   
+            }
+        
+        });
+        
+    	    buttonMoviesCancel = new Button(compositeButtons, SWT.PUSH | SWT.CENTER);
+    	    buttonMoviesCancel.setText(l.getString(&quot;button.cancel&quot;));
+    	    buttonMoviesCancel.setEnabled(false);
+    	    buttonMoviesCancel.addSelectionListener(new SelectionAdapter() {
+            public void widgetSelected(SelectionEvent evt) {
+                System.out
+                        .println(&quot;buttonMoviesCancel.widgetSelected, event=&quot;
+                                + evt);
+                setMoviesGroupButtonSaveCancel();
+            }
+        });
+    }
+    
+  }
+
+    /**
+     * 
+     */
+    protected void setMoviesGroupButtonSaveCancel() {
+        tableMoviesOverview.setEnabled(true);
+        textMoviesTitle.setEditable(false);
+        textMoviesDate.setEditable(false);
+        textMoviesDescription.setEditable(false);
+        buttonMoviesCancel.setEnabled(false);
+        buttonMoviesSave.setEnabled(false);
+        buttonMoviesNew.setEnabled(true);
+        buttonMoviesEdit.setEnabled(false);
+        buttonMoviesDelete.setEnabled(false);
+        buttonMoviesEditDirectors.setEnabled(false);
+        buttonMoviesEditActors.setEnabled(false);
+        buttonMoviesEditGenres.setEnabled(false);
+        buttonMoviesEditImages.setEnabled(false);
+    }
+
+    /**
+     * @param text
+     */
+    protected void refreshMoviesOverviewTable(String text) {
+        // TODO Auto-generated method stub
+        
+    }
+
+    /**
+     * @param text
+     */
+    protected void refreshMoviesDetail(String text) {
+        // TODO Auto-generated method stub
+        
+    }
+
+    protected void openDialogDescription() {
+        // TODO Auto-generated method stub
+        Shell dialogShell = new Shell();
+        //Dialog dialogDescription=new Dialog(dialogShell);
+        //dialogDescription.open();
+        Movie film = new Movie();
+        film.setActors(new ArrayList());
+        film.setImages(new ArrayList());
+        film.setGenres(new ArrayList());
+        film.setDirector(new ArrayList());
+        
+        DialogMovie test= new DialogMovie(dialogShell,1, l.getLocale( ),film,DialogMovie.TYPE_ACTOR);
+        test.open();
+
+    }
+    
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000170.html">[Provirent-svn-commit] r169 - project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui
</A></li>
	<LI>Next message: <A HREF="000172.html">[Provirent-svn-commit] r171 - project_src/provirent_hibernate/src/de/hsharz/provirent/management/gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#171">[ date ]</a>
              <a href="thread.html#171">[ thread ]</a>
              <a href="subject.html#171">[ subject ]</a>
              <a href="author.html#171">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/provirent-svn-commit">More information about the Provirent-svn-commit
mailing list</a><br>
</body></html>
